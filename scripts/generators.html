
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Input Generators &#8212; Avogadro 1.94.0-55-gbefc28e8 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="canonical" href="https://two.avogadro.cc/scripts/generators.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Script File Formats" href="formats.html" />
    <link rel="prev" title="Command Scripts" href="commands.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/avogadro2.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../install/index.html">
  Install
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Script Plugins
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  Library API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../contrib/index.html">
  Contribute
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://discuss.avogadro.cc">Discuss<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/openchemistry/avogadrolibs" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/AvogadroChem" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="interface.html">
   Script Interfaces
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="commands.html">
   Command Scripts
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Input Generators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="formats.html">
   Script File Formats
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#script-entry-points">
   Script Entry Points
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#specifying-parameters-with-print-options">
   Specifying parameters with
   <code class="docutils literal notranslate">
    <span class="pre">
     --print-options
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#special-parameters">
   Special Parameters
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#syntax-highlighting">
   Syntax Highlighting
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#requesting-full-structure-of-current-molecule">
   Requesting Full Structure of Current Molecule
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#handling-user-selections-generate-input">
   Handling User Selections:
   <code class="docutils literal notranslate">
    <span class="pre">
     --generate-input
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#automatic-generation-of-geometry">
   Automatic Generation of Geometry
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#coordinate-blocks">
     Coordinate Blocks
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#error-handling">
   Error Handling
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#debugging">
   Debugging
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/openchemistry/avogadrolibs/edit/master/docs/scripts/generators.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          
          

          
          
            
            
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
            
              <div>
                
  <div class="section" id="input-generators">
<span id="id1"></span><h1>Input Generators<a class="headerlink" href="#input-generators" title="Permalink to this headline">¶</a></h1>
<p>Input generators offer several unique capabilities for formatting text
input for programs, including syntax highlighting rules and capabilities
for creating multiple files as part of one input (e.g., separate files
for geometry and keywords).</p>
<p>Avogadro will call input generator scripts using several command-line arguments
to generate JSON both for the user interface form and for the input to send
to the external programs.</p>
<div class="section" id="script-entry-points">
<h2>Script Entry Points<a class="headerlink" href="#script-entry-points" title="Permalink to this headline">¶</a></h2>
<p>The script must handle the following command-line arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--debug</span></code> Enable extra debugging output. Used with other commands.
It is not required that the script support extra debugging, but it should
not crash when this option is passed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--print-options</span></code> Print the available options supported by the
script, e.g. simulation parameters, etc. See below for more details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--generate-input</span></code> Read an option block from stdin and print
input files to stdout. See below for more details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--display-name</span></code> Print a user-friendly name for the input generator.
This is used in the GUI for menu entries, window titles, etc.</p></li>
</ul>
</div>
<div class="section" id="specifying-parameters-with-print-options">
<h2>Specifying parameters with <code class="docutils literal notranslate"><span class="pre">--print-options</span></code><a class="headerlink" href="#specifying-parameters-with-print-options" title="Permalink to this headline">¶</a></h2>
<p>The format of the <code class="docutils literal notranslate"><span class="pre">--print-options</span></code> output must be a JSON object of
the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;userOptions&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="o">...</span>
   <span class="p">},</span>
   <span class="s2">&quot;highlightStyles&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;style&quot;</span><span class="p">:</span> <span class="s2">&quot;Descriptive name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
           <span class="s2">&quot;patterns&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="p">],</span>
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
          <span class="p">},</span>
         <span class="o">...</span>
        <span class="p">],</span>
     <span class="p">},</span>
     <span class="o">...</span>
    <span class="p">],</span>
   <span class="s2">&quot;inputMoleculeFormat&quot;</span><span class="p">:</span> <span class="s2">&quot;cjson&quot;</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>The <cite>userOptions</cite> block contains a JSON object keyed with option names
(e.g. “First option name”), which are used in the GUI to label simulation
parameter settings. Various parameter types are supported.</p>
</div>
<div class="section" id="special-parameters">
<h2>Special Parameters<a class="headerlink" href="#special-parameters" title="Permalink to this headline">¶</a></h2>
<p>Some parameters are common to most calculation codes.
If the following parameter names are found, they will be handled specially
while creating the GUI (e.g., the charge and spin will be placed on one line)</p>
<p>It is recommended to use the names below for these options to provide a
consistent interface and ensure that MoleQueue job staging uses correct
values where appropriate.</p>
<table class="table">
<colgroup>
<col style="width: 20%" />
<col style="width: 11%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>“Title”</p></td>
<td><p>string</p></td>
<td><p>Input file title comment, MoleQueue job description.</p></td>
</tr>
<tr class="row-odd"><td><p>“Filename Base”</p></td>
<td><p>string</p></td>
<td><p>Input file base name, e.g. “job” in “job.inp”.</p></td>
</tr>
<tr class="row-even"><td><p>“Processor Cores”</p></td>
<td><p>integer</p></td>
<td><p>Number of cores to use. Will be passed to MoleQueue.</p></td>
</tr>
<tr class="row-odd"><td><p>“Calculation Type”</p></td>
<td><p>stringList</p></td>
<td><p>Type of calculation, e.g. “Single Point” or “Equilibrium Geometry”.</p></td>
</tr>
<tr class="row-even"><td><p>“Theory”</p></td>
<td><p>stringList</p></td>
<td><p>Levels of QM theory, e.g. “RHF”, “B3LYP”, “MP2”, “CCSD”, etc.</p></td>
</tr>
<tr class="row-odd"><td><p>“Basis”</p></td>
<td><p>stringList</p></td>
<td><p>Available basis sets, e.g. “STO-3G”, “6-31G**”, etc.</p></td>
</tr>
<tr class="row-even"><td><p>“Charge”</p></td>
<td><p>integer</p></td>
<td><p>Charge on the system.</p></td>
</tr>
<tr class="row-odd"><td><p>“Multiplicity”</p></td>
<td><p>integer</p></td>
<td><p>Spin multiplicity of the system.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="syntax-highlighting">
<h2>Syntax Highlighting<a class="headerlink" href="#syntax-highlighting" title="Permalink to this headline">¶</a></h2>
<p>Rules for syntax highlighting can be specified as a collection of
regular expressions or wildcard patterns and text format specifications
in the “highlightRules” array. The highlightRules format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;highlightStyles&quot;</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;style&quot;</span><span class="p">:</span> <span class="s2">&quot;Style 1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">(</span><span class="nb">list</span> <span class="n">of</span> <span class="n">highlight</span> <span class="n">rules</span><span class="p">,</span> <span class="n">see</span> <span class="n">below</span><span class="p">)</span> <span class="p">],</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">&quot;style&quot;</span><span class="p">:</span> <span class="s2">&quot;Style 2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">(</span><span class="nb">list</span> <span class="n">of</span> <span class="n">highlight</span> <span class="n">rules</span><span class="p">,</span> <span class="n">see</span> <span class="n">below</span><span class="p">)</span> <span class="p">],</span>
  <span class="p">},</span>
  <span class="o">...</span>
<span class="p">],</span>
</pre></div>
</div>
<p>The style name is unique to the style object, and used to associate a
set of highlighting rules with particular output files. See the
–generate-input documentation for more details.</p>
<p>The general form of a highlight rule is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;patterns&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;regexp&quot;</span><span class="p">:</span> <span class="s2">&quot;^Some regexp?$&quot;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;wildcard&quot;</span><span class="p">:</span> <span class="s2">&quot;A * wildcard expression&quot;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;string&quot;</span><span class="p">:</span> <span class="s2">&quot;An exact string to match.&quot;</span><span class="p">,</span>
      <span class="s2">&quot;caseSensitive&quot;</span><span class="p">:</span> <span class="n">false</span>
    <span class="p">},</span>
    <span class="o">...</span>
  <span class="p">],</span>
  <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;preset&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;preset name&gt;&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>or,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;patterns&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">...</span>
  <span class="p">],</span>
  <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;foreground&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span>  <span class="mi">64</span> <span class="p">],</span>
    <span class="s2">&quot;background&quot;</span><span class="p">:</span> <span class="p">[</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span> <span class="p">],</span>
    <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span> <span class="s2">&quot;italic&quot;</span><span class="p">,</span> <span class="s2">&quot;underline&quot;</span><span class="p">],</span>
    <span class="s2">&quot;family&quot;</span><span class="p">:</span> <span class="s2">&quot;serif&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The patterns array contains a collection of fixed strings, wildcard
expressions, and regular expressions (using the QRegExp syntax flavor,
see the QRegExp documentation) that are used to identify strings that
should be formatted. There must be one of the following members present
in each pattern object:</p>
<ul class="simple">
<li><p>regexp A QRegExp-style regular expression. If no capture groups
(“(…)”) are defined, the entire match is formatted. If one or more
capture groups, only the captured texts will be marked.</p></li>
<li><p>wildcard A wildcard expression</p></li>
<li><p>string An exact string to match. Any pattern object may also set a
boolean caseSensitive member to indicate whether the match should
consider character case. If omitted, a case-sensitive match is
assumed.</p></li>
</ul>
<p>The preferred form of the format member is simply a specification of a
preset format. This allows for consistent color schemes across input
generators. The recognized presets are:</p>
<ul class="simple">
<li><p>“title”: A human readable title string.</p></li>
<li><p>“keyword”: directives defined by the target input format
specification to have special meaning, such as tags indicating where
coordinates are to be found.</p></li>
<li><p>“property”: A property of the simulation, such as level of theory,
basis set, minimization method, etc.</p></li>
<li><p>“literal”: A numeric literal (i.e. a raw number, such as a
coordinate).</p></li>
<li><p>“comment”: Sections of the input that are ignored by the simulation
code.</p></li>
</ul>
<p>If advanced formatting is desired, the second form of the format member
allows fine-tuning of the font properties:</p>
<ul class="simple">
<li><p>foreground color as an RGB tuple, ranged 0-255</p></li>
<li><p>background color as an RGB tuple, ranged 0-255</p></li>
<li><p>attributes array of font attributes, valid strings are “bold”, “italic”, or “underline”</p></li>
<li><p>family of font. Valid values are “serif”, “sans”, or “mono” Any of the font property members may be omitted and default QTextCharFormat settings will be substituted.</p></li>
</ul>
<p>The input generator extension will apply the entries in the highlightRules object to the text in the order they appear. Thus, later rules will override the formatting of earlier rules should a conflict arise.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;patterns&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">...</span>
  <span class="p">],</span>
  <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;foreground&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span>  <span class="mi">64</span> <span class="p">],</span>
    <span class="s2">&quot;background&quot;</span><span class="p">:</span> <span class="p">[</span>   <span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span> <span class="p">],</span>
    <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span> <span class="s2">&quot;italic&quot;</span><span class="p">,</span> <span class="s2">&quot;underline&quot;</span><span class="p">],</span>
    <span class="s2">&quot;family&quot;</span><span class="p">:</span> <span class="s2">&quot;serif&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <cite>patterns</cite> array contains a collection of fixed strings, wildcard
expressions, and regular expressions (using the QRegExp syntax flavor, see
the QRegExp documentation) that are used to identify strings that should be
formatted.</p>
<p>There must be one of the following members present in each pattern object:</p>
<ul class="simple">
<li><p><cite>regexp</cite> A QRegExp-style regular expression. If no capture groups (“(…)”)
are defined, the entire match is formatted. If one or more capture groups,
only the captured texts will be marked.</p></li>
<li><p><cite>wildcard</cite> A wildcard expression</p></li>
<li><p><cite>string</cite> An exact string to match.</p></li>
</ul>
<p>Any pattern object may also set a boolean <cite>caseSensitive</cite> member to indicate
whether the match should consider character case. If omitted, a
case-sensitive match is assumed.</p>
<p>The preferred form of the <cite>format</cite> member is simply a specification of a
preset format. This allows for consistent color schemes across input generators.
The recognized presets are:</p>
<ul class="simple">
<li><p><cite>“title”</cite>: A human readable title string.</p></li>
<li><p><cite>“keyword”</cite>: directives defined by the target input format specification
to have special meaning, such as tags indicating where coordinates are
to be found.</p></li>
<li><p><cite>“property”</cite>: A property of the simulation, such as level of theory, basis
set, minimization method, etc.</p></li>
<li><p><cite>“literal”</cite>: A numeric literal (i.e. a raw number, such as a coordinate).</p></li>
<li><p><cite>“comment”</cite>: Sections of the input that are ignored by the simulation code.</p></li>
</ul>
<p>If advanced formatting is desired, the second form of the <cite>format</cite> member
allows fine-tuning of the font properties:</p>
<ul class="simple">
<li><p><cite>foreground</cite> color as an RGB tuple, ranged 0-255</p></li>
<li><p><cite>background</cite> color as an RGB tuple, ranged 0-255</p></li>
<li><p><cite>attributes</cite> array of font attributes, valid strings are <cite>“bold”</cite>,
<cite>“italic”</cite>, or <cite>“underline”</cite></p></li>
<li><p><cite>family</cite> of font. Valid values are <cite>“serif”</cite>, <cite>“sans”</cite>, or <cite>“mono”</cite></p></li>
</ul>
<p>Any of the font property members may be omitted and default QTextCharFormat
settings will be substituted.</p>
<p>The input generator extension will apply the entries in the <cite>highlightRules</cite>
object to the text in the order they appear. Thus, later rules will
override the formatting of earlier rules should a conflict arise.</p>
</div>
<div class="section" id="requesting-full-structure-of-current-molecule">
<h2>Requesting Full Structure of Current Molecule<a class="headerlink" href="#requesting-full-structure-of-current-molecule" title="Permalink to this headline">¶</a></h2>
<p>The <cite>inputMoleculeFormat</cite> is optional, and can be used to request a
representation of the current molecule’s geometry when
<cite>–generate-input</cite> is called. The corresponding value
indicates the format of the molecule that the script expects. If this value
is omitted, no representation of the structure will be provided.</p>
<p>note Currently valid options for inputMoleculeFormat are “cjson” for
Chemical JSON or “cml” for Chemical Markup Language.</p>
</div>
<div class="section" id="handling-user-selections-generate-input">
<h2>Handling User Selections: <code class="docutils literal notranslate"><span class="pre">--generate-input</span></code><a class="headerlink" href="#handling-user-selections-generate-input" title="Permalink to this headline">¶</a></h2>
<p>When <code class="docutils literal notranslate"><span class="pre">--generate-input</span></code> is passed, the information needed to generate
the input file will be written to the script’s standard input
channel as JSON string of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;cjson&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span>
  <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;First option name&quot;</span><span class="p">:</span> <span class="s2">&quot;Value 2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Second option name&quot;</span><span class="p">:</span> <span class="s2">&quot;Value 1&quot;</span><span class="p">,</span>
    <span class="o">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">cjson</span></code> entry will contain a Chemical JSON representation
of the molecule if <cite>inputMoleculeFormat</cite> is set to “cjson” in the
<code class="docutils literal notranslate"><span class="pre">--print-options</span></code> output.
Similarly, a <code class="docutils literal notranslate"><span class="pre">cml</span></code> entry and CML string will exist if a Chemical Markup
Language representation was requested.
It will be omitted entirely if <cite>inputMoleculeFormat</cite> is not set.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">options</span></code> block contains key/value
pairs for each of the options specified in the <cite>userOptions</cite> block of the
<code class="docutils literal notranslate"><span class="pre">--print-options</span></code> output.</p>
<p>If the script is called with <code class="docutils literal notranslate"><span class="pre">--generate-input</span></code>, it must write a JSON
string to standard output with the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;files&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;file1.ext&quot;</span><span class="p">,</span>
      <span class="s2">&quot;contents&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
      <span class="s2">&quot;highlightStyles&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">...</span> <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;file2.ext&quot;</span><span class="p">,</span>
      <span class="s2">&quot;filePath&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/file/on/local/filesystem&quot;</span>
    <span class="p">},</span>
    <span class="o">...</span>
  <span class="p">],</span>
  <span class="s2">&quot;warnings&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;First warning.&quot;</span><span class="p">,</span> <span class="s2">&quot;Second warning.&quot;</span><span class="p">,</span> <span class="o">...</span> <span class="p">],</span>
  <span class="s2">&quot;mainFile&quot;</span><span class="p">:</span> <span class="s2">&quot;file2.ext&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <cite>files</cite> block is an array of objects, which define the actual input
files. The <cite>filename</cite> member provides the name of the file, and
either <cite>contents</cite> or <cite>filePath</cite> provide the text that goes into the file.
The <cite>contents</cite> string will be used as the file contents, and <cite>filePath</cite>
should contain an absolute path to a file on the filesystem to read and use
as the input file contents.</p>
<p>The optional <cite>highlightStyles</cite> member is an array of strings describing any
highlight styles to apply to the file (see <code class="docutils literal notranslate"><span class="pre">--print-options</span></code> documentation).
Each string in this array must match a <cite>style</cite> description in a highlighting
rule in the <code class="docutils literal notranslate"><span class="pre">--print-options</span></code> output.
Zero or more highlighting styles may be applied to any file.</p>
<p>The order of the files in the
GUI will match the order of the files in the array, and the first file will
be displayed first.</p>
<p>The <cite>warnings</cite> member provides an array of strings that describe non-fatal
warnings to be shown to the users. This is useful for describing
the resolution of conflicting options, e.g. “Ignoring basis set for
semi-empirical calculation.”. This member is optional and should be omitted
if no warnings are present.</p>
<p>The <cite>mainFile</cite> member points to the primary input file for a calculation.
This is the file that will be used as a command line argument when executing
the simulation code (if applicable), and used by MoleQueue to set the
<cite>$$inputFileName$$</cite> and <cite>$$inputFileBaseName$$</cite> input template keywords.
This is optional; if present, the filename must exist in the <cite>files</cite> array.
If absent and only one file is specified in <cite>files</cite>, the single input file
will be used. Otherwise, the main file will be left unspecified.</p>
</div>
<div class="section" id="automatic-generation-of-geometry">
<h2>Automatic Generation of Geometry<a class="headerlink" href="#automatic-generation-of-geometry" title="Permalink to this headline">¶</a></h2>
<p>The generation of molecular geometry descriptions may be skipped in the
script and deferred to the InputGenerator class by use of a special keyword.
The “contents” string may contain a keyword of the form</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$$coords:[coordSpec]$$
</pre></div>
</div>
<p>where <cite>[coordSpec]</cite> is a sequence of characters.
The characters in <cite>[coordSpec]</cite> indicate the information needed about each
atom in the coordinate block.</p>
<p>Other keywords that can be used in the input files are:
- <cite>$$atomCount$$</cite>: Number of atoms in the molecule.
- <cite>$$bondCount$$</cite>: Number of bonds in the molecule.</p>
<div class="section" id="coordinate-blocks">
<h3>Coordinate Blocks<a class="headerlink" href="#coordinate-blocks" title="Permalink to this headline">¶</a></h3>
<p>The characters in the specification string indicate the information
needed about each atom in the coordinate block.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#</span></code>: Atom index (one-based index)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Z</span></code>: Atomic number (e.g. “6” for carbon)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">G</span></code>: GAMESS-styled Atomic number (e.g. “6.0” for carbon)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">S</span></code>: Element symbol (e.g. “C” for carbon)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">N</span></code>: Element name (e.g. “Carbon”)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code>: X cartesian coordinate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y</span></code>: Y cartesian coordinate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z</span></code>: Z cartesian coordinate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a</span></code>: ‘a’ lattice coordinate (unit cell required)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">b</span></code>: ‘b’ lattice coordinate (unit cell required)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: ‘c’ lattice coordinate (unit cell required)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: A literal “0”. Useful for optimization flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>: A literal “1”. Useful for optimization flags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_</span></code>: A space character. Useful for alignment.</p></li>
</ul>
<p>For example, the specification string</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">__SZxyz110</span>
</pre></div>
</div>
<p>will be replaced by a molecule-specific block of text similar to the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span>  <span class="mi">6</span>    <span class="mf">1.126214</span>  <span class="mf">0.765886</span>  <span class="mf">0.000000</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="n">C</span>  <span class="mi">6</span>    <span class="mf">0.819345</span> <span class="o">-</span><span class="mf">0.564955</span>  <span class="mf">0.000000</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="n">C</span>  <span class="mi">6</span>   <span class="o">-</span><span class="mf">0.598383</span> <span class="o">-</span><span class="mf">0.795127</span>  <span class="mf">0.000000</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="n">C</span>  <span class="mi">6</span>   <span class="o">-</span><span class="mf">1.310706</span>  <span class="mf">0.370165</span>  <span class="mf">0.000000</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="n">S</span>  <span class="mi">16</span>  <span class="o">-</span><span class="mf">0.285330</span>  <span class="mf">1.757144</span>  <span class="mf">0.000000</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="n">H</span>  <span class="mi">1</span>    <span class="mf">2.130424</span>  <span class="mf">1.185837</span>  <span class="mf">0.000000</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="n">H</span>  <span class="mi">1</span>    <span class="mf">1.548377</span> <span class="o">-</span><span class="mf">1.375303</span>  <span class="mf">0.000000</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="n">H</span>  <span class="mi">1</span>   <span class="o">-</span><span class="mf">1.033768</span> <span class="o">-</span><span class="mf">1.794407</span>  <span class="mf">0.000000</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="n">H</span>  <span class="mi">1</span>   <span class="o">-</span><span class="mf">2.396173</span>  <span class="mf">0.450760</span>  <span class="mf">0.000000</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="error-handling">
<h2>Error Handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h2>
<p>In general, these scripts should be written robustly so that they will not
fail under normal circumstances. However, if for some reason an error
occurs that must be reported to the user, simply write the error message to
standard output as plain text (i.e. not JSON), and it will be shown to the
user.</p>
</div>
<div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<p>Debugging may be enabled by defining AVO_QM_INPUT_DEBUG in the process’s
environment. This will cause the <code class="docutils literal notranslate"><span class="pre">--debug</span></code> option to be passed in
all calls to generator scripts, and will print extra information to the
qDebug() stream from within avogadro. The script is free to handle the
debug flag as the author wishes.</p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="commands.html" title="previous page">Command Scripts</a>
    <a class='right-next' id="next-link" href="formats.html" title="next page">Script File Formats</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="container-fluid footer-copy">

    <div class="container">

      <div class="row">
        <div class="col-md-10 py-2">
          <p>
            ©2021 The OpenChemistry / Avogadro Teams. The website content uses the <a href="https://github.com/openchemistry/avogadrolibs/blob/master/LICENSE">BSD License</a> and is covered by the <a href="https://github.com/openchemistry/avogadrolibs/blob/master/CODE_OF_CONDUCT.md">Avogadro Code of Conduct</a>.
          </p>
        </div>
        <br />
        <div class="col-md-2 py-2">
          <a class="btn btn-primary" href="https://opencollective.com/open-chemistry">Donate</a>
        </div>
      </div>

    </div>

  </footer>
  </body>
</html>